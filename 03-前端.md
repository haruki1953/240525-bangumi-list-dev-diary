项目名 bangumi-list-vue3

TypeScript + Vue3 + Element-Plus
https://element-plus.org/zh-CN/component/overview.html

项目地址 https://github.com/haruki1953/bangumi-list-vue3

参考
[04_前端开发记录](../240215-e5-website-dev-diary/04_前端开发记录.md)
[06_移动端前端开发](../240215-e5-website-dev-diary/06_移动端前端开发.md)
[02-项目起步、Layout、Home](../240207vueNote/vue3小兔鲜/02-项目起步、Layout、Home.md)

# 一、初始化项目
## 1.1 pnpm 创建项目
创建项目：pnpm create vue  
![](assets/Pasted%20image%2020240528182149.png)
- 安装依赖：pnpm install
- 运行项目：pnpm dev

## 1.2 ESLint & prettier 配置代码风格
**配置文件 .eslintrc.cjs**  
```js
/* eslint-env node */
require('@rushstack/eslint-patch/modern-module-resolution')

module.exports = {
  root: true,
  'extends': [
    'plugin:vue/vue3-essential',
    'eslint:recommended',
    '@vue/eslint-config-typescript',
    '@vue/eslint-config-prettier/skip-formatting'
  ],
  parserOptions: {
    ecmaVersion: 'latest'
  },
  rules: {
    'prettier/prettier': [
      'warn',
      {
        singleQuote: true, // 单引号
        semi: false, // 无分号
        printWidth: 80, // 每行宽度至多80字符
        trailingComma: 'none', // 不加对象|数组最后逗号
        endOfLine: 'auto' // 换行符号不限制（win mac 不一致）
      }
    ],
    'vue/multi-word-component-names': [
      'warn',
      {
        ignores: ['index'] // vue组件名称多单词组成（忽略index.vue）
      }
    ],
    'vue/no-setup-props-destructure': ['off'], // 关闭 props 解构的校验
    // 未定义变量错误提示
    'no-undef': 'error'
  }
}
```

```json
// ESlint插件 + Vscode配置 实现自动格式化修复
"editor.codeActionsOnSave": {
    "source.fixAll": true
},
"editor.formatOnSave": false,
```

## 1.3 基于 husky 的代码检查工作流
git初始化 git init（创建版本库）

初始化 husky 工具配置  https://typicode.github.io/husky/
```sh
pnpm dlx husky-init && pnpm install
```

暂存区 eslint 校验 **lint-staged 配置**  
1. 安装
```jsx
pnpm i lint-staged -D
```
2. 配置 `package.json`
```jsx
{
  // ... 省略 ...
  "scripts": {
    // ... 省略 ...
    "lint-staged": "lint-staged"
  }
  "lint-staged": {
    "*.{js,ts,vue}": [
      "eslint --fix"
    ]
  }
}
```
3. 修改 .husky/pre-commit 文件
```sh
# npm test 删掉
pnpm lint-staged
```

## 1.4 调整项目目录
### 删除文件
- 删除 src/assets 下的文件
- 删除 src/components 下的文件
- 删除 src/stores 下的文件
- 删除 src/views 下的文件