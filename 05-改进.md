
## 240710
- ç•ªå‰§å°é¢åå‘ä»£ç†
- å‰ç«¯å¯é‡å†™ç•ªå‰§æ•°æ®ä¸­çš„ç›¸å…³é“¾æ¥ï¼ˆå°é¢ã€alisté“¾æ¥ï¼‰
- å…³äºé¡µé¢æ·»åŠ å¯åŠ¨æ€æ§åˆ¶çš„å†…å®¹
- TDKå†æ”¹ä¸€ä¸‹ï¼ŒåŠ ç½‘é¡µå›¾ç‰‡
- BgmConfigç±»å‹ä¸­ã€å¿˜äº†ç»™å…¶ä¸­çš„ä¸€äº›å±æ€§è®¾ç½®ä¸ºå¯é€‰
- è§£å†³â€œç‰©è¯­ç³»åˆ— å¤–ä¼ å­£&amp;æ€ªç‰©å­£â€ç‰¹æ®Šå­—ç¬¦æ˜¾ç¤ºé—®é¢˜

### ç•ªå‰§å°é¢åå‘ä»£ç†
å› ä¸ºbgmçš„å›¾ç‰‡æœ‰æ—¶å€™åŠ è½½ä¸å‡ºæ¥ï¼Œè€Œä¸”å…¶æµè§ˆå™¨ç¼“å­˜åªæœ‰8å¤©ï¼Œæ‰€ä»¥ç°åœ¨åå‘ä»£ç†ä¸€ä¸‹ å¹¶å°†æµè§ˆå™¨ç¼“å­˜åŠ é•¿ä¸º180å¤©ï¼Œåœ¨é…ç½®ä¸€ä¸‹åå‘ä»£ç†ç¼“å­˜30å¤©

```
åŸ
https://lain.bgm.tv/r/400/pic/cover/l/98/5e/386809_1yR81.jpg
ä»£ç†å
https://static.sakiko.top/bangumi-cover/l/98/5e/386809_1yR81.jpg
```
![](assets/Pasted%20image%2020240710153343.png)

```nginx
#PROXY-START/bangumi-cover/

location ^~ /bangumi-cover/
{
    proxy_pass https://lain.bgm.tv/r/400/pic/cover/;
    proxy_set_header Host lain.bgm.tv;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header REMOTE-HOST $remote_addr;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $connection_upgrade;
    proxy_http_version 1.1;
    # proxy_hide_header Upgrade;

    add_header X-Cache $upstream_cache_status;
		#Set Nginx Cache


    if ( $uri ~* "\.(gif|png|jpg|css|js|woff|woff2)$" )
    {
        expires 1m;
    }
    proxy_ignore_headers Set-Cookie Cache-Control expires;
    proxy_cache cache_one;
    proxy_cache_key $host$uri$is_args$args;
    proxy_cache_valid 200 304 301 302 43200m;
}

#PROXY-END/bangumi-cover/
```

é‡åˆ°äº†ä¸€ç‚¹é—®é¢˜ğŸ˜‡ï¼Œé—®é¢˜ä¸å°
ï¼ˆåœ°å€æ å¯¹ä¸ä¸Šæ˜¯å› ä¸ºåæ¥åˆæ”¹ä»£ç†ç›®å½•äº†ï¼ˆå¯èƒ½æ˜¯å› ä¸ºcfç¼“å­˜å¯¼è‡´äº†å¥‡æ€ªçš„é—®é¢˜ï¼Œæ‰€ä»¥æ”¹äº†ï¼‰ï¼‰
![](assets/Pasted%20image%2020240710173506.png)

